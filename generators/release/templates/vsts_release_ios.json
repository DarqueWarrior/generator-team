{
   "name": "{{ReleaseDefName}}",
   "variables": {
      "system.debug": {
         "value": "false"
      }
   },
   "environments": [{
         "name": "Dev",
         "rank": 1,
         "variables": {
            "ResourceGroupName": {
               "value": "{{WebAppName}}Dev"
            },
            "AlertInterval": {
               "value": "1"
            },
            "BundleId": {
               "value": "com.meglem.xamarin"
            },
            "CertificateP12": {
               "value": "Xamarin-Dev.p12"
            },
            "CertificateP12Password": {
               "value": null,
               "isSecret": true
            },
            "ProvisioningProfile": {
               "value": ""
            },
            "SigningIdentity": {
               "value": "iPhone Developer"
            }
         },
         "preDeployApprovals": {
            "approvals": [{
               "rank": 1,
               "isAutomated": true,
               "isNotificationOn": false
            }]
         },
         "deployStep": {},
         "postDeployApprovals": {
            "approvals": [{
               "rank": 1,
               "isAutomated": true,
               "isNotificationOn": false
            }]
         },
         "deployPhases": [{
            "deploymentInput": {
               "skipArtifactsDownload": false,
               "timeoutInMinutes": 0,
               "queueId": "{{QueueId}}",
               "demands": [],
               "enableAccessToken": false
            },
            "rank": 1,
            "phaseType": 1,
            "name": "Run on agent",
            "workflowTasks": [
               {
                  "taskId": "cbbf7f14-c386-4c1f-80a3-fe500e2bd977",
                  "version": "1.*",
                  "name": "Resign IPA file",
                  "refName": "IpaResign2",
                  "enabled": true,
                  "alwaysRun": false,
                  "continueOnError": false,
                  "timeoutInMinutes": 0,
                  "definitionType": "task",
                  "overrideInputs": {},
                  "condition": "succeeded()",
                  "inputs": {
                     "ipaPath": "$(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa",
                     "entitlementsPath": "",
                     "signMethod": "file",
                     "signFileP12Path": "",
                     "signFileP12Password": "",
                     "signIdIdentity": "",
                     "signIdUnlockKeychain": "false",
                     "signIdKeychainPassword": "",
                     "provisionMethod": "file",
                     "provFileProfilePath": "",
                     "provFileRemoveProfile": "false",
                     "provIdProfileUuid": "",
                     "sighResignArgs": "",
                     "cwdPath": "",
                     "installFastlane": "true",
                     "fastlaneToolsVersion": "LatestVersion",
                     "fastlaneToolsSpecificVersion": ""
                  }
               },
               {
                  "taskId": "b832bec5-8c27-4fef-9fb8-6bec8524ad8a",
                  "version": "0.*",
                  "name": "Deploy $(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa to Visual Studio Mobile Center",
                  "refName": "MobileCenterDistribute_7",
                  "enabled": true,
                  "alwaysRun": false,
                  "continueOnError": false,
                  "timeoutInMinutes": 0,
                  "definitionType": "task",
                  "overrideInputs": {},
                  "condition": "succeeded()",
                  "inputs": {
                     "serverEndpoint": "",
                     "appSlug": "{{WebAppName}}-ios",
                     "app": "$(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa",
                     "symbolsType": "Apple",
                     "symbolsPath": "",
                     "pdbPath": "**/*.pdb",
                     "dsymPath": "",
                     "mappingTxtPath": "",
                     "packParentFolder": "false",
                     "releaseNotesSelection": "input",
                     "releaseNotesInput": "-",
                     "releaseNotesFile": "",
                     "distributionGroupId": ""
                  }
               }
            ]
         }],
         "environmentOptions": {
            "emailNotificationType": "OnlyOnFailure",
            "emailRecipients": "release.environment.owner;release.creator",
            "skipArtifactsDownload": false,
            "timeoutInMinutes": 0,
            "enableAccessToken": false
         },
         "demands": [],
         "conditions": [{
            "name": "ReleaseStarted",
            "conditionType": 1,
            "value": ""
         }],
         "executionPolicy": {
            "concurrencyCount": 0,
            "queueDepthCount": 0
         },
         "schedules": [],
         "retentionPolicy": {
            "daysToKeep": 30,
            "releasesToKeep": 3,
            "retainBuild": true
         }
      },
      {
         "name": "QA",
         "rank": 2,
         "variables": {
            "ResourceGroupName": {
               "value": "{{WebAppName}}QA"
            },
            "AlertInterval": {
               "value": "1"
            },
            "BundleId": {
               "value": "com.meglem.xamarin"
            },
            "CertificateP12": {
               "value": "Xamarin-Dev.p12"
            },
            "CertificateP12Password": {
               "value": null,
               "isSecret": true
            },
            "ProvisioningProfile": {
               "value": ""
            },
            "SigningIdentity": {
               "value": "iPhone Developer"
            }
         },
         "preDeployApprovals": {
            "approvals": [{
               "rank": 1,
               "isAutomated": false,
               "isNotificationOn": false,
               "approver": {
                  "id": "{{ApproverId}}",
                  "displayName": "{{ApproverDisplayName}}",
                  "uniqueName": "{{ApproverUniqueName}}"
               }
            }],
            "approvalOptions": {
               "requiredApproverCount": 0,
               "releaseCreatorCanBeApprover": true
            }
         },
         "deployStep": {},
         "postDeployApprovals": {
            "approvals": [{
               "rank": 1,
               "isAutomated": true,
               "isNotificationOn": false
            }]
         },
         "deployPhases": [{
            "deploymentInput": {
               "skipArtifactsDownload": false,
               "timeoutInMinutes": 0,
               "queueId": "{{QueueId}}",
               "demands": [],
               "enableAccessToken": false
            },
            "rank": 1,
            "phaseType": 1,
            "name": "Run on agent",
            "workflowTasks": [{
               "taskId": "cbbf7f14-c386-4c1f-80a3-fe500e2bd977",
               "version": "1.*",
               "name": "Resign IPA file",
               "refName": "IpaResign2",
               "enabled": true,
               "alwaysRun": false,
               "continueOnError": false,
               "timeoutInMinutes": 0,
               "definitionType": "task",
               "overrideInputs": {},
               "condition": "succeeded()",
               "inputs": {
                  "ipaPath": "$(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa",
                  "entitlementsPath": "",
                  "signMethod": "file",
                  "signFileP12Path": "",
                  "signFileP12Password": "",
                  "signIdIdentity": "",
                  "signIdUnlockKeychain": "false",
                  "signIdKeychainPassword": "",
                  "provisionMethod": "file",
                  "provFileProfilePath": "",
                  "provFileRemoveProfile": "false",
                  "provIdProfileUuid": "",
                  "sighResignArgs": "",
                  "cwdPath": "",
                  "installFastlane": "true",
                  "fastlaneToolsVersion": "LatestVersion",
                  "fastlaneToolsSpecificVersion": ""
               }
            },
               {
                  "taskId": "b832bec5-8c27-4fef-9fb8-6bec8524ad8a",
                  "version": "0.*",
                  "name": "Deploy $(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa to Visual Studio Mobile Center",
                  "refName": "MobileCenterDistribute_7",
                  "enabled": true,
                  "alwaysRun": false,
                  "continueOnError": false,
                  "timeoutInMinutes": 0,
                  "definitionType": "task",
                  "overrideInputs": {},
                  "condition": "succeeded()",
                  "inputs": {
                     "serverEndpoint": "",
                     "appSlug": "{{WebAppName}}-ios",
                     "app": "$(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa",
                     "symbolsType": "Apple",
                     "symbolsPath": "",
                     "pdbPath": "**/*.pdb",
                     "dsymPath": "",
                     "mappingTxtPath": "",
                     "packParentFolder": "false",
                     "releaseNotesSelection": "input",
                     "releaseNotesInput": "-",
                     "releaseNotesFile": "",
                     "distributionGroupId": ""
                  }
               }
            ]
         }],
         "environmentOptions": {
            "emailNotificationType": "OnlyOnFailure",
            "emailRecipients": "release.environment.owner;release.creator",
            "skipArtifactsDownload": false,
            "timeoutInMinutes": 0,
            "enableAccessToken": false
         },
         "demands": [],
         "conditions": [{
            "name": "Dev",
            "conditionType": 2,
            "value": "4"
         }],
         "executionPolicy": {
            "concurrencyCount": 0,
            "queueDepthCount": 0
         },
         "schedules": [],
         "retentionPolicy": {
            "daysToKeep": 30,
            "releasesToKeep": 3,
            "retainBuild": true
         }
      },
      {
         "name": "Prod",
         "rank": 3,
         "variables": {
            "ResourceGroupName": {
               "value": "{{WebAppName}}Prod"
            },
            "AlertInterval": {
               "value": "1"
            },
            "BundleId": {
               "value": "com.meglem.xamarin"
            },
            "CertificateP12": {
               "value": "Xamarin-Dev.p12"
            },
            "CertificateP12Password": {
               "value": null,
               "isSecret": true
            },
            "ProvisioningProfile": {
               "value": ""
            },
            "SigningIdentity": {
               "value": "iPhone Developer"
            }
         },
         "preDeployApprovals": {
            "approvals": [{
               "rank": 1,
               "isAutomated": false,
               "isNotificationOn": false,
               "approver": {
                  "id": "{{ApproverId}}",
                  "displayName": "{{ApproverDisplayName}}",
                  "uniqueName": "{{ApproverUniqueName}}"
               }
            }],
            "approvalOptions": {
               "requiredApproverCount": 0,
               "releaseCreatorCanBeApprover": true
            }
         },
         "deployStep": {},
         "postDeployApprovals": {
            "approvals": [{
               "rank": 1,
               "isAutomated": true,
               "isNotificationOn": false
            }]
         },
         "deployPhases": [{
            "deploymentInput": {
               "skipArtifactsDownload": false,
               "timeoutInMinutes": 0,
               "queueId": "{{QueueId}}",
               "demands": [],
               "enableAccessToken": false
            },
            "rank": 1,
            "phaseType": 1,
            "name": "Run on agent",
            "workflowTasks": [{
               "taskId": "cbbf7f14-c386-4c1f-80a3-fe500e2bd977",
               "version": "1.*",
               "name": "Resign IPA file",
               "refName": "IpaResign2",
               "enabled": true,
               "alwaysRun": false,
               "continueOnError": false,
               "timeoutInMinutes": 0,
               "definitionType": "task",
               "overrideInputs": {},
               "condition": "succeeded()",
               "inputs": {
                  "ipaPath": "$(System.DefaultWorkingDirectory)/**/drop/ios/*.ipa",
                  "entitlementsPath": "",
                  "signMethod": "file",
                  "signFileP12Path": "",
                  "signFileP12Password": "",
                  "signIdIdentity": "",
                  "signIdUnlockKeychain": "false",
                  "signIdKeychainPassword": "",
                  "provisionMethod": "file",
                  "provFileProfilePath": "",
                  "provFileRemoveProfile": "false",
                  "provIdProfileUuid": "",
                  "sighResignArgs": "",
                  "cwdPath": "",
                  "installFastlane": "true",
                  "fastlaneToolsVersion": "LatestVersion",
                  "fastlaneToolsSpecificVersion": ""
               }
            }
            ]
         }],
         "environmentOptions": {
            "emailNotificationType": "OnlyOnFailure",
            "emailRecipients": "release.environment.owner;release.creator",
            "skipArtifactsDownload": false,
            "timeoutInMinutes": 0,
            "enableAccessToken": false
         },
         "demands": [],
         "conditions": [{
            "name": "QA",
            "conditionType": 2,
            "value": "4"
         }],
         "executionPolicy": {
            "concurrencyCount": 0,
            "queueDepthCount": 0
         },
         "schedules": [],
         "retentionPolicy": {
            "daysToKeep": 30,
            "releasesToKeep": 3,
            "retainBuild": true
         }
      }
   ],
   "artifacts": [{
      "sourceId": "{{ProjectId}}:{{BuildId}}",
      "type": "Build",
      "alias": "{{BuildName}}",
      "definitionReference": {
         "defaultVersionBranch": {
            "id": "",
            "name": ""
         },
         "defaultVersionSpecific": {
            "id": "",
            "name": ""
         },
         "defaultVersionTags": {
            "id": "",
            "name": ""
         },
         "defaultVersionType": {
            "id": "latestType",
            "name": "Latest"
         },
         "definition": {
            "id": "{{BuildId}}",
            "name": "{{BuildName}}"
         },
         "project": {
            "id": "{{ProjectId}}",
            "name": "{{ProjectName}}"
         }
      },
      "isPrimary": true
   }],
   "triggers": [{
      "artifactAlias": "{{BuildName}}",
      "triggerType": 1
   }]
}